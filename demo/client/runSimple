#!/usr/bin/perl
#$Id: runSimple,v 1.8 2007/04/30 18:59:58 vpapad Exp $

use Cwd;

$niagroot = $ENV{"NIAGROOT"};

# if it is already set, leave it alone
if($niagroot eq "") {
    $niagroot = cwd();
    while (! -d "${niagroot}/demo" || ! -d "${niagroot}/lib") {
	    $niagroot =~ s!/[^/]*$!!;
 		die "ERROR: cannot find ancestor directory with demo and lib subdirectories\n"
 		if ($niagroot eq "");
    }
}

$niagroot .= "/";

# set classpath path
$classpath = `cat $niagroot/demo/classpath`;
$classpath =~ s/\n/ /;
$classpath =~ s/NIAGROOT\//$niagroot/g; 

$command = "java -classpath " . $classpath . 
           "niagara.client.SimpleClient " . join(" ", @ARGV) . "\n";
#print $command;
exec $command;
